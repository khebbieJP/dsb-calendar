[tools]
python = "3.11"

[env]
_.python.venv = { path = ".venv", create = true }

[tasks.install]
description = "Install Python dependencies"
run = "uv pip install -r requirements.txt"

[tasks.test]
description = "Run automated tests"
run = "pytest test_dsb_to_ics.py -v"

[tasks.convert]
description = "Convert DSB PDF ticket to ICS calendar file"
run = """
if [ -z "$1" ]; then
  echo "Usage: mise run convert <input.pdf> [output.ics]"
  echo "Example: mise run convert Billet.pdf DSB_Rejse.ics"
  exit 1
fi
python dsb_to_ics.py "$@"
"""

[tasks.example]
description = "Run example conversion with Billet.pdf"
run = "python dsb_to_ics.py Billet.pdf DSB_Rejse_Example.ics"

[tasks.clean]
description = "Clean up generated files and cache"
run = """
rm -f *.ics
rm -rf .pytest_cache
rm -rf __pycache__
find . -name "*.pyc" -delete
echo "Cleaned up generated files and cache"
"""
